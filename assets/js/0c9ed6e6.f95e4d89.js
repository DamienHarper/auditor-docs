"use strict";(self.webpackChunkauditor_docs=self.webpackChunkauditor_docs||[]).push([[929],{6240(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"configuration/index","title":"Configuration Reference","description":"All configuration options available in auditor-bundle","source":"@site/docs/auditor-bundle/configuration/index.md","sourceDirName":"configuration","slug":"/configuration/","permalink":"/auditor-docs/auditor-bundle/configuration/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"auditorBundleSidebar","previous":{"title":"Installation","permalink":"/auditor-docs/auditor-bundle/getting-started/installation"},"next":{"title":"Storage Configuration","permalink":"/auditor-docs/auditor-bundle/configuration/storage"}}');var d=r(4848),s=r(8453);const t={},l="Configuration Reference",c={},a=[{value:"\ud83d\udcc1 Configuration File",id:"-configuration-file",level:2},{value:"\ud83d\udd0d Quick Reference",id:"-quick-reference",level:2},{value:"\u2699\ufe0f Global Options",id:"\ufe0f-global-options",level:2},{value:"enabled",id:"enabled",level:3},{value:"timezone",id:"timezone",level:3},{value:"user_provider",id:"user_provider",level:3},{value:"security_provider",id:"security_provider",level:3},{value:"role_checker",id:"role_checker",level:3},{value:"\ud83d\uddc4\ufe0f Doctrine Provider Options",id:"\ufe0f-doctrine-provider-options",level:2},{value:"table_prefix / table_suffix",id:"table_prefix--table_suffix",level:3},{value:"ignored_columns",id:"ignored_columns",level:3},{value:"entities",id:"entities",level:3},{value:"storage_services",id:"storage_services",level:3},{value:"auditing_services",id:"auditing_services",level:3},{value:"storage_mapper",id:"storage_mapper",level:3},{value:"utf8_convert",id:"utf8_convert",level:3},{value:"viewer",id:"viewer",level:3},{value:"\ud83d\udcdd Complete Example",id:"-complete-example",level:2},{value:"\ud83c\udf0d Environment-Specific Configuration",id:"-environment-specific-configuration",level:2},{value:"\ud83d\udd10 Using Environment Variables",id:"-using-environment-variables",level:2},{value:"\ud83d\ude80 Next Steps",id:"-next-steps",level:2}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",path:"path",pre:"pre",strong:"strong",svg:"svg",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"configuration-reference",children:"Configuration Reference"})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"All configuration options available in auditor-bundle"})}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"This section covers all configuration options for auditor-bundle."}),"\n",(0,d.jsx)(n.h2,{id:"-configuration-file",children:"\ud83d\udcc1 Configuration File"}),"\n",(0,d.jsxs)(n.p,{children:["All configuration is done in ",(0,d.jsx)(n.code,{children:"config/packages/dh_auditor.yaml"}),"."]}),"\n",(0,d.jsx)(n.h2,{id:"-quick-reference",children:"\ud83d\udd0d Quick Reference"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    enabled: true                           # Enable/disable auditing globally\n    timezone: 'UTC'                         # Timezone for audit timestamps\n    user_provider: 'dh_auditor.user_provider'\n    security_provider: 'dh_auditor.security_provider'\n    role_checker: 'dh_auditor.role_checker'\n\n    providers:\n        doctrine:\n            table_prefix: ''\n            table_suffix: '_audit'\n            ignored_columns: []\n            entities: []\n            storage_services: ['@doctrine.orm.default_entity_manager']\n            auditing_services: ['@doctrine.orm.default_entity_manager']\n            storage_mapper: ~\n            utf8_convert: false             # Re-enable legacy UTF-8 conversion (opt-in)\n            viewer: false\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\ufe0f-global-options",children:"\u2699\ufe0f Global Options"}),"\n",(0,d.jsx)(n.h3,{id:"enabled",children:"enabled"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"true"})}),(0,d.jsx)(n.td,{children:"Enable or disable all auditing"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    enabled: true\n"})}),"\n",(0,d.jsxs)(n.p,{children:["When ",(0,d.jsx)(n.code,{children:"false"}),", no changes are audited until re-enabled at runtime."]}),"\n",(0,d.jsx)(n.h3,{id:"timezone",children:"timezone"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"'UTC'"})}),(0,d.jsx)(n.td,{children:"Timezone for audit timestamps"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    timezone: 'Europe/Paris'\n"})}),"\n",(0,d.jsx)(n.h3,{id:"user_provider",children:"user_provider"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"'dh_auditor.user_provider'"})}),(0,d.jsx)(n.td,{children:"Service ID for user provider"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    user_provider: 'App\\Audit\\CustomUserProvider'\n"})}),"\n",(0,d.jsxs)(n.div,{className:"markdown-alert markdown-alert-tip",dir:"auto",children:["\n",(0,d.jsxs)(n.p,{className:"markdown-alert-title",dir:"auto",children:[(0,d.jsx)(n.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,d.jsx)(n.path,{d:"M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),"TIP"]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/customization/user-provider",children:"User Provider Customization"})," for creating custom providers."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"security_provider",children:"security_provider"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"'dh_auditor.security_provider'"})}),(0,d.jsx)(n.td,{children:"Service ID for security provider"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    security_provider: 'App\\Audit\\CustomSecurityProvider'\n"})}),"\n",(0,d.jsxs)(n.div,{className:"markdown-alert markdown-alert-tip",dir:"auto",children:["\n",(0,d.jsxs)(n.p,{className:"markdown-alert-title",dir:"auto",children:[(0,d.jsx)(n.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,d.jsx)(n.path,{d:"M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),"TIP"]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/customization/security-provider",children:"Security Provider Customization"})," for creating custom providers."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"role_checker",children:"role_checker"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"'dh_auditor.role_checker'"})}),(0,d.jsx)(n.td,{children:"Service ID for role checker"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    role_checker: 'App\\Audit\\CustomRoleChecker'\n"})}),"\n",(0,d.jsxs)(n.div,{className:"markdown-alert markdown-alert-tip",dir:"auto",children:["\n",(0,d.jsxs)(n.p,{className:"markdown-alert-title",dir:"auto",children:[(0,d.jsx)(n.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,d.jsx)(n.path,{d:"M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),"TIP"]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/customization/role-checker",children:"Role Checker Customization"})," for creating custom checkers."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\ufe0f-doctrine-provider-options",children:"\ud83d\uddc4\ufe0f Doctrine Provider Options"}),"\n",(0,d.jsxs)(n.p,{children:["All options under ",(0,d.jsx)(n.code,{children:"providers.doctrine"}),":"]}),"\n",(0,d.jsx)(n.h3,{id:"table_prefix--table_suffix",children:"table_prefix / table_suffix"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Option"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"table_prefix"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"''"})}),(0,d.jsx)(n.td,{children:"Prefix for audit table names"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"table_suffix"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"'_audit'"})}),(0,d.jsx)(n.td,{children:"Suffix for audit table names"})]})]})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            table_prefix: 'audit_'\n            table_suffix: ''\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Example: Entity table ",(0,d.jsx)(n.code,{children:"users"})," \u2192 Audit table ",(0,d.jsx)(n.code,{children:"audit_users"})]}),"\n",(0,d.jsx)(n.h3,{id:"ignored_columns",children:"ignored_columns"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"array"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"[]"})}),(0,d.jsx)(n.td,{children:"Properties to ignore globally across all entities"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            ignored_columns:\n                - createdAt\n                - updatedAt\n                - password\n"})}),"\n",(0,d.jsx)(n.h3,{id:"entities",children:"entities"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"array"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"[]"})}),(0,d.jsx)(n.td,{children:"Entities to audit and options"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            entities:\n                # Simple: all defaults\n                App\\Entity\\User: ~\n                \n                # With options\n                App\\Entity\\Post:\n                    enabled: true\n                    ignored_columns:\n                        - viewCount\n                    roles:\n                        view:\n                            - ROLE_ADMIN\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Entity options:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Option"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"enabled"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"true"})}),(0,d.jsx)(n.td,{children:"Enable/disable auditing for entity"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ignored_columns"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"array"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"[]"})}),(0,d.jsx)(n.td,{children:"Properties to ignore for this entity"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"roles.view"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"array"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"[]"})}),(0,d.jsx)(n.td,{children:"Roles required to view audits"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"storage_services",children:"storage_services"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"array"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"['@doctrine.orm.default_entity_manager']"})}),(0,d.jsx)(n.td,{children:"Entity managers for storage"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            storage_services:\n                - '@doctrine.orm.default_entity_manager'\n                - '@doctrine.orm.audit_entity_manager'\n"})}),"\n",(0,d.jsxs)(n.div,{className:"markdown-alert markdown-alert-note",dir:"auto",children:["\n",(0,d.jsxs)(n.p,{className:"markdown-alert-title",dir:"auto",children:[(0,d.jsx)(n.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,d.jsx)(n.path,{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"})}),"NOTE"]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/configuration/storage",children:"Multi-Database Setup"})," for details on using multiple storage services."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"auditing_services",children:"auditing_services"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"array"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"['@doctrine.orm.default_entity_manager']"})}),(0,d.jsx)(n.td,{children:"Entity managers to monitor"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            auditing_services:\n                - '@doctrine.orm.default_entity_manager'\n                - '@doctrine.orm.secondary_entity_manager'\n"})}),"\n",(0,d.jsx)(n.h3,{id:"storage_mapper",children:"storage_mapper"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string|null"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"null"})}),(0,d.jsx)(n.td,{children:"Service ID for routing audits to storage"})]})})]}),"\n",(0,d.jsx)(n.p,{children:"Required when using multiple storage services."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            storage_mapper: 'App\\Audit\\StorageMapper'\n"})}),"\n",(0,d.jsxs)(n.div,{className:"markdown-alert markdown-alert-note",dir:"auto",children:["\n",(0,d.jsxs)(n.p,{className:"markdown-alert-title",dir:"auto",children:[(0,d.jsx)(n.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,d.jsx)(n.path,{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"})}),"NOTE"]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/configuration/storage",children:"Multi-Database Setup"})," for details."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"utf8_convert",children:"utf8_convert"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})}),(0,d.jsx)(n.td,{children:"Re-enable the legacy UTF-8 conversion pass"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            utf8_convert: false\n"})}),"\n",(0,d.jsxs)(n.p,{children:["In auditor 3.x, every audit entry value was passed through ",(0,d.jsx)(n.code,{children:"mb_convert_encoding()"})," automatically. In auditor 4.0+ this implicit conversion is ",(0,d.jsx)(n.strong,{children:"disabled by default"})," because DBAL 4 enforces UTF-8 connections on PHP 8.4+, making the conversion a no-op for virtually all modern applications."]}),"\n",(0,d.jsx)(n.p,{children:"If your application reads data from legacy non-UTF-8 sources, you can re-enable the conversion explicitly:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            utf8_convert: true\n"})}),"\n",(0,d.jsxs)(n.div,{className:"markdown-alert markdown-alert-note",dir:"auto",children:["\n",(0,d.jsxs)(n.p,{className:"markdown-alert-title",dir:"auto",children:[(0,d.jsx)(n.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,d.jsx)(n.path,{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"})}),"NOTE"]}),"\n",(0,d.jsxs)(n.p,{children:["Enabling this option has a small performance cost as every stored value is passed through ",(0,d.jsx)(n.code,{children:"mb_convert_encoding()"}),". Leave it disabled unless you know your data sources may produce non-UTF-8 strings."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"viewer",children:"viewer"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool|array"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})}),(0,d.jsx)(n.td,{children:"Enable/configure audit viewer"})]})})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"# Simple enable\ndh_auditor:\n    providers:\n        doctrine:\n            viewer: true\n\n# With options\ndh_auditor:\n    providers:\n        doctrine:\n            viewer:\n                enabled: true\n                page_size: 50\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Viewer options:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Option"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"enabled"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})}),(0,d.jsx)(n.td,{children:"Enable the viewer"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"page_size"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"int"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"50"})}),(0,d.jsx)(n.td,{children:"Results per page"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"-complete-example",children:"\ud83d\udcdd Complete Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"# config/packages/dh_auditor.yaml\ndh_auditor:\n    enabled: true\n    timezone: 'Europe/Paris'\n    \n    providers:\n        doctrine:\n            table_suffix: '_audit'\n            \n            ignored_columns:\n                - createdAt\n                - updatedAt\n            \n            entities:\n                App\\Entity\\User:\n                    roles:\n                        view: [ROLE_ADMIN]\n                \n                App\\Entity\\Post:\n                    ignored_columns:\n                        - viewCount\n                \n                App\\Entity\\Comment: ~\n            \n            viewer:\n                enabled: true\n                page_size: 100\n"})}),"\n",(0,d.jsx)(n.h2,{id:"-environment-specific-configuration",children:"\ud83c\udf0d Environment-Specific Configuration"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"# config/packages/dev/dh_auditor.yaml\ndh_auditor:\n    providers:\n        doctrine:\n            viewer: true\n\n# config/packages/prod/dh_auditor.yaml\ndh_auditor:\n    providers:\n        doctrine:\n            viewer:\n                enabled: true\n                page_size: 50\n"})}),"\n",(0,d.jsx)(n.h2,{id:"-using-environment-variables",children:"\ud83d\udd10 Using Environment Variables"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    enabled: '%env(bool:AUDITOR_ENABLED)%'\n    timezone: '%env(AUDITOR_TIMEZONE)%'\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"-next-steps",children:"\ud83d\ude80 Next Steps"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\ud83c\udff7\ufe0f ",(0,d.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/configuration/attributes",children:"Entity Attributes"})," - Configure entities with PHP attributes"]}),"\n",(0,d.jsxs)(n.li,{children:["\ud83d\uddc4\ufe0f ",(0,d.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/configuration/storage",children:"Storage Configuration"})," - Multi-database setup"]}),"\n",(0,d.jsxs)(n.li,{children:["\ud83d\udd27 ",(0,d.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/customization/",children:"Customization"})," - Custom providers"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>t,x:()=>l});var i=r(6540);const d={},s=i.createContext(d);function t(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);