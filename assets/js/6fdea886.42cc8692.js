"use strict";(self.webpackChunkauditor_docs=self.webpackChunkauditor_docs||[]).push([[6695],{7585(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"contributing","title":"Contributing","description":"Contribution are always welcome and much appreciated!","source":"@site/auditor_versioned_docs/version-3.x/contributing.md","sourceDirName":".","slug":"/contributing","permalink":"/auditor-docs/auditor/3.x/contributing","draft":false,"unlisted":false,"tags":[],"version":"3.x","frontMatter":{"title":"Contributing"},"sidebar":"docs","next":{"title":"What is auditor?","permalink":"/auditor-docs/auditor/3.x/"}}');var t=s(4848),a=s(8453);const r={title:"Contributing"},o=void 0,c={},d=[{value:"Requirements",id:"requirements",level:2},{value:"Coding standards",id:"coding-standards",level:2},{value:"Static code analysis",id:"static-code-analysis",level:2},{value:"Running Tests",id:"running-tests",level:2},{value:"Default configuration (SQLite)",id:"default-configuration-sqlite",level:3},{value:"MySQL configuration",id:"mysql-configuration",level:3},{value:"PostgreSQL configuration",id:"postgresql-configuration",level:3},{value:"MariaDB configuration",id:"mariadb-configuration",level:3}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Contribution are always welcome and much appreciated!"}),"\n",(0,t.jsxs)(n.p,{children:["The development of ",(0,t.jsx)(n.code,{children:"auditor"})," is hosted on ",(0,t.jsx)(n.a,{href:"https://github.com/DamienHarper/auditor",children:"GitHub"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsx)(n.p,{children:"Before starting to contribute, you first need to install dev dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"composer install --dev\n"})}),"\n",(0,t.jsx)(n.p,{children:"You also have to install external dev tools:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"composer install --working-dir=tools/php-cs-fixer\ncomposer install --working-dir=tools/phpstan\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Also, in an effort to maintain an homogeneous code base, we strongly encourage contributors\nto run ",(0,t.jsx)(n.a,{href:"https://github.com/FriendsOfPHP/PHP-CS-Fixer",children:"PHP-CS-Fixer"})," and ",(0,t.jsx)(n.a,{href:"https://github.com/phpstan/phpstan",children:"PHPStan"}),"\nbefore submitting a Pull Request."]}),"\n",(0,t.jsx)(n.h2,{id:"coding-standards",children:"Coding standards"}),"\n",(0,t.jsxs)(n.p,{children:["Coding standards are enforced using ",(0,t.jsx)(n.a,{href:"https://github.com/FriendsOfPHP/PHP-CS-Fixer",children:"PHP-CS-Fixer"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"composer csfixer\n"})}),"\n",(0,t.jsx)(n.h2,{id:"static-code-analysis",children:"Static code analysis"}),"\n",(0,t.jsxs)(n.p,{children:["Static code analysis can be achieved using ",(0,t.jsx)(n.a,{href:"https://github.com/phpstan/phpstan",children:"PHPStan"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"composer phpstan\n"})}),"\n",(0,t.jsx)(n.h2,{id:"running-tests",children:"Running Tests"}),"\n",(0,t.jsxs)(n.p,{children:["By default, test suite is configured to use an SQLite in-memory database and generates\na code coverage report in ",(0,t.jsx)(n.code,{children:"tests/coverage"})," folder."]}),"\n",(0,t.jsx)(n.p,{children:"However, you can run the test suite using different configurations:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"SQLite"}),"\n",(0,t.jsx)(n.li,{children:"MySQL"}),"\n",(0,t.jsx)(n.li,{children:"PostgreSQL"}),"\n",(0,t.jsx)(n.li,{children:"MariaDB"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"default-configuration-sqlite",children:"Default configuration (SQLite)"}),"\n",(0,t.jsxs)(n.p,{children:["This configuration uses an in memory SQLite database and generates code coverage report\nin ",(0,t.jsx)(n.code,{children:"tests/coverage"})," folder (requires ",(0,t.jsx)(n.a,{href:"https://github.com/krakjoe/pcov",children:"PCOV extension"}),")."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"composer test\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can also run tests using an in memory SQLite database and without generating code coverage report,\nit's the fastest configuration."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./vendor/bin/phpunit -c phpunit.sqlite.xml \n"})}),"\n",(0,t.jsx)(n.h3,{id:"mysql-configuration",children:"MySQL configuration"}),"\n",(0,t.jsx)(n.p,{children:"This configuration expects to connect to a MySQL database."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./vendor/bin/phpunit -c phpunit.mysql.xml \n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note\nConnection parameters (username, password, host, port, etc) are set in ",(0,t.jsx)("code",{children:"phpunit.mysql.xml"})," file."]}),"\n",(0,t.jsx)(n.p,{children:"Assuming you have docker installed, you can easily start a MySQL server with following command (MySQL 8)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --name mysql_db -e MYSQL_DATABASE=auditor -e MYSQL_ALLOW_EMPTY_PASSWORD=1 -d -p 3306:3306 mysql --default-authentication-plugin=mysql_native_password\n"})}),"\n",(0,t.jsx)(n.h3,{id:"postgresql-configuration",children:"PostgreSQL configuration"}),"\n",(0,t.jsx)(n.p,{children:"This configuration expects to connect to a PostgreSQL database."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./vendor/bin/phpunit -c phpunit.pgsql.xml \n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note\nConnection parameters (username, password, host, port, etc) are set in ",(0,t.jsx)("code",{children:"phpunit.pgsql.xml"})," file."]}),"\n",(0,t.jsx)(n.p,{children:"Assuming you have docker installed, you can easily start a PostgreSQL server with following command (PostgreSQL 11)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --name postgres_db -e POSTGRES_DB=auditor  -e POSTGRES_HOST_AUTH_METHOD=trust -d -p 5432:5432 postgres\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mariadb-configuration",children:"MariaDB configuration"}),"\n",(0,t.jsx)(n.p,{children:"This configuration expects to connect to a MariaDB database."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./vendor/bin/phpunit -c phpunit.mariadb.xml \n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note\nConnection parameters (username, password, host, port, etc) are set in ",(0,t.jsx)("code",{children:"phpunit.mariadb.xml"})," file."]}),"\n",(0,t.jsx)(n.p,{children:"Assuming you have docker installed, you can easily start a MariaDB server with following command"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --name mariadb_db -e MYSQL_DATABASE=auditor -e MYSQL_ALLOW_EMPTY_PASSWORD=1 -p 3306:3306 mariadb\n"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>o});var i=s(6540);const t={},a=i.createContext(t);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);