"use strict";(self.webpackChunkauditor_docs=self.webpackChunkauditor_docs||[]).push([[1805],{537(e,i,r){r.r(i),r.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"customization/index","title":"Customization","description":"Customize the bundle\'s providers for your specific needs","source":"@site/docs/auditor-bundle/customization/index.md","sourceDirName":"customization","slug":"/customization/","permalink":"/auditor-docs/auditor-bundle/customization/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"auditorBundleSidebar","previous":{"title":"Entity Attributes","permalink":"/auditor-docs/auditor-bundle/configuration/attributes"},"next":{"title":"User Provider","permalink":"/auditor-docs/auditor-bundle/customization/user-provider"}}');var s=r(4848),d=r(8453);const t={},o="Customization",c={},l=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83d\udce6 Built-in Providers",id:"-built-in-providers",level:2},{value:"UserProvider",id:"userprovider",level:3},{value:"SecurityProvider",id:"securityprovider",level:3},{value:"RoleChecker",id:"rolechecker",level:3},{value:"\ud83d\udda5\ufe0f Console Commands",id:"\ufe0f-console-commands",level:2},{value:"\ud83e\udd14 When to Customize",id:"-when-to-customize",level:2},{value:"User Provider",id:"user-provider",level:3},{value:"Security Provider",id:"security-provider",level:3},{value:"Role Checker",id:"role-checker",level:3},{value:"\ud83d\udcda Customization Guides",id:"-customization-guides",level:2}];function a(e){const i={a:"a",blockquote:"blockquote",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",path:"path",strong:"strong",svg:"svg",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"customization",children:"Customization"})}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Customize the bundle's providers for your specific needs"})}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"This section covers how to customize the bundle's providers."}),"\n",(0,s.jsx)(i.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,s.jsx)(i.p,{children:"The bundle uses three providers that can be customized:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Provider"}),(0,s.jsx)(i.th,{children:"Purpose"}),(0,s.jsx)(i.th,{children:"Default Service"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"User Provider"}),(0,s.jsx)(i.td,{children:"Returns current user information"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"dh_auditor.user_provider"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Security Provider"}),(0,s.jsx)(i.td,{children:"Returns IP address and firewall name"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"dh_auditor.security_provider"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Role Checker"}),(0,s.jsx)(i.td,{children:"Checks if user can view entity audits"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"dh_auditor.role_checker"})})]})]})]}),"\n",(0,s.jsx)(i.mermaid,{value:'flowchart LR\n    subgraph PROVIDERS["Customizable Providers"]\n        direction TB\n        UP["\ud83d\udc64 UserProvider<br>Who made the change?"]\n        SP["\ud83d\udd12 SecurityProvider<br>IP address & context"]\n        RC["\ud83d\udee1\ufe0f RoleChecker<br>Who can view audits?"]\n    end\n    \n    UP --\x3e AUDIT["Audit Entry"]\n    SP --\x3e AUDIT\n    RC --\x3e VIEWER["Audit Viewer"]'}),"\n",(0,s.jsx)(i.h2,{id:"-built-in-providers",children:"\ud83d\udce6 Built-in Providers"}),"\n",(0,s.jsx)(i.h3,{id:"userprovider",children:"UserProvider"}),"\n",(0,s.jsxs)(i.p,{children:["The default ",(0,s.jsx)(i.code,{children:"UserProvider"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\u2705 Gets the current user from Symfony's ",(0,s.jsx)(i.code,{children:"TokenStorage"})]}),"\n",(0,s.jsxs)(i.li,{children:["\u2705 Extracts user ID via ",(0,s.jsx)(i.code,{children:"getId()"})," method (if exists)"]}),"\n",(0,s.jsxs)(i.li,{children:["\u2705 Extracts username via ",(0,s.jsx)(i.code,{children:"getUserIdentifier()"})]}),"\n",(0,s.jsx)(i.li,{children:"\u2705 Tracks impersonation (switch user)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"securityprovider",children:"SecurityProvider"}),"\n",(0,s.jsxs)(i.p,{children:["The default ",(0,s.jsx)(i.code,{children:"SecurityProvider"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\u2705 Gets client IP from the current ",(0,s.jsx)(i.code,{children:"Request"})]}),"\n",(0,s.jsxs)(i.li,{children:["\u2705 Gets firewall name from ",(0,s.jsx)(i.code,{children:"FirewallMap"})]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"rolechecker",children:"RoleChecker"}),"\n",(0,s.jsxs)(i.p,{children:["The default ",(0,s.jsx)(i.code,{children:"RoleChecker"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\u2705 Uses Symfony's ",(0,s.jsx)(i.code,{children:"AuthorizationChecker"})]}),"\n",(0,s.jsx)(i.li,{children:"\u2705 Checks roles configured per entity"}),"\n",(0,s.jsx)(i.li,{children:"\u2705 Grants access if no roles configured"}),"\n",(0,s.jsx)(i.li,{children:"\u2705 Grants access if no user authenticated"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"\ufe0f-console-commands",children:"\ud83d\udda5\ufe0f Console Commands"}),"\n",(0,s.jsxs)(i.p,{children:["The bundle automatically switches to ",(0,s.jsx)(i.code,{children:"ConsoleUserProvider"})," during console commands:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"User ID"}),": Command name (e.g., ",(0,s.jsx)(i.code,{children:"app:import-users"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Username"}),": Command name"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["This is handled by ",(0,s.jsx)(i.code,{children:"ConsoleEventSubscriber"})," and requires no configuration."]}),"\n",(0,s.jsxs)(i.div,{className:"markdown-alert markdown-alert-tip",dir:"auto",children:["\n",(0,s.jsxs)(i.p,{className:"markdown-alert-title",dir:"auto",children:[(0,s.jsx)(i.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,s.jsx)(i.path,{d:"M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),"TIP"]}),"\n",(0,s.jsx)(i.p,{children:"This allows you to filter audit entries by specific CLI command in the viewer."}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"-when-to-customize",children:"\ud83e\udd14 When to Customize"}),"\n",(0,s.jsx)(i.h3,{id:"user-provider",children:"User Provider"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u274c You don't use Symfony's security component"}),"\n",(0,s.jsx)(i.li,{children:"\ud83d\udd27 You need additional user information"}),"\n",(0,s.jsx)(i.li,{children:"\ud83d\udd10 You have a custom authentication system"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"security-provider",children:"Security Provider"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\ud83c\udf10 You're behind a proxy/load balancer"}),"\n",(0,s.jsx)(i.li,{children:"\ud83d\udce1 You need custom headers for IP detection"}),"\n",(0,s.jsx)(i.li,{children:"\ud83d\udcdd You want to capture additional context"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"role-checker",children:"Role Checker"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\ud83d\udd04 You need complex authorization logic"}),"\n",(0,s.jsx)(i.li,{children:"\ud83d\udd17 You integrate with an external authorization service"}),"\n",(0,s.jsx)(i.li,{children:"\ud83c\udfaf You need entity-specific or context-aware access control"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-customization-guides",children:"\ud83d\udcda Customization Guides"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\ud83d\udc64 ",(0,s.jsx)(i.a,{href:"/auditor-docs/auditor-bundle/customization/user-provider",children:"User Provider"})," - Custom user identification"]}),"\n",(0,s.jsxs)(i.li,{children:["\ud83d\udd12 ",(0,s.jsx)(i.a,{href:"/auditor-docs/auditor-bundle/customization/security-provider",children:"Security Provider"})," - Custom IP/context detection"]}),"\n",(0,s.jsxs)(i.li,{children:["\ud83d\udee1\ufe0f ",(0,s.jsx)(i.a,{href:"/auditor-docs/auditor-bundle/customization/role-checker",children:"Role Checker"})," - Custom access control"]}),"\n",(0,s.jsxs)(i.li,{children:["\ud83d\udce6 ",(0,s.jsx)(i.a,{href:"/auditor-docs/auditor-bundle/customization/extra-data",children:"Extra Data"})," - Attach additional data to audit entries"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,i,r){r.d(i,{R:()=>t,x:()=>o});var n=r(6540);const s={},d=n.createContext(s);function t(e){const i=n.useContext(d);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),n.createElement(d.Provider,{value:i},e.children)}}}]);