"use strict";(self.webpackChunkauditor_docs=self.webpackChunkauditor_docs||[]).push([[7278],{6728(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"configuration/index","title":"Configuration Reference","description":"All configuration options available in auditor","source":"@site/docs/auditor/configuration/index.md","sourceDirName":"configuration","slug":"/configuration/","permalink":"/auditor-docs/auditor/configuration/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Quick Start Guide","permalink":"/auditor-docs/auditor/getting-started/quick-start"},"next":{"title":"User Provider Configuration","permalink":"/auditor-docs/auditor/configuration/user-provider"}}');var t=r(4848),o=r(8453);const s={},d="Configuration Reference",c={},l=[{value:"\u2699\ufe0f Auditor Configuration",id:"\ufe0f-auditor-configuration",level:2},{value:"Options Reference",id:"options-reference",level:3},{value:"\ud83d\udd27 Configuration Methods",id:"-configuration-methods",level:2},{value:"Enable/Disable Auditing",id:"enabledisable-auditing",level:3},{value:"Get Timezone",id:"get-timezone",level:3},{value:"\ud83d\udc64 User Provider",id:"-user-provider",level:2},{value:"\ud83d\udd10 Security Provider",id:"-security-provider",level:2},{value:"\ud83d\udee1\ufe0f Role Checker",id:"\ufe0f-role-checker",level:2},{value:"\ud83d\uddc4\ufe0f DoctrineProvider Configuration",id:"\ufe0f-doctrineprovider-configuration",level:2},{value:"\ud83d\udcdd Configuration Summary",id:"-configuration-summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"configuration-reference",children:"Configuration Reference"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"All configuration options available in auditor"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This section covers all configuration options available in auditor."}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-auditor-configuration",children:"\u2699\ufe0f Auditor Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The main ",(0,t.jsx)(n.code,{children:"Configuration"})," class accepts the following options:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"<?php\n\nuse DH\\Auditor\\Configuration;\n\n$configuration = new Configuration([\n    'enabled' => true,\n    'timezone' => 'UTC',\n    'user_provider' => null,\n    'security_provider' => null,\n    'role_checker' => null,\n]);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"options-reference",children:"Options Reference"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"enabled"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"true"})}),(0,t.jsx)(n.td,{children:"Enable or disable auditing globally"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timezone"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'UTC'"})}),(0,t.jsx)(n.td,{children:"Timezone used for audit timestamps"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"user_provider"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"callable|null"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Callback that returns the current user"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"security_provider"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"callable|null"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Callback that returns security context info"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"role_checker"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"callable|null"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Callback that checks if user can view entity audits"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"-configuration-methods",children:"\ud83d\udd27 Configuration Methods"}),"\n",(0,t.jsx)(n.h3,{id:"enabledisable-auditing",children:"Enable/Disable Auditing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Disable auditing\n$configuration->disable();\n\n// Re-enable auditing\n$configuration->enable();\n\n// Check if auditing is enabled\nif ($configuration->isEnabled()) {\n    // ...\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"get-timezone",children:"Get Timezone"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"$timezone = $configuration->getTimezone();\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-user-provider",children:"\ud83d\udc64 User Provider"}),"\n",(0,t.jsx)(n.p,{children:"The user provider is a callable that returns information about the current user. This is used to record who made each change."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"use DH\\Auditor\\User\\User;\n\n$configuration->setUserProvider(function (): ?User {\n    // Return null if no user is authenticated\n    $currentUser = $this->security->getUser();\n    \n    if (null === $currentUser) {\n        return null;\n    }\n    \n    return new User(\n        (string) $currentUser->getId(),  // User identifier\n        $currentUser->getUsername()       // Username for display\n    );\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"User"})," class implements ",(0,t.jsx)(n.code,{children:"UserInterface"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"namespace DH\\Auditor\\User;\n\ninterface UserInterface\n{\n    public function getIdentifier(): ?string;\n    public function getUsername(): ?string;\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/auditor-docs/auditor/configuration/user-provider",children:"User Provider Configuration"})," for more details."]}),"\n",(0,t.jsx)(n.h2,{id:"-security-provider",children:"\ud83d\udd10 Security Provider"}),"\n",(0,t.jsx)(n.p,{children:"The security provider returns contextual security information to be stored with audit entries:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"$configuration->setSecurityProvider(function (): array {\n    return [\n        'client_ip' => $_SERVER['REMOTE_ADDR'] ?? null,\n        'user_fqdn' => $this->security->getUser()?::class,\n        'user_firewall' => $this->getFirewallName(),\n    ];\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/auditor-docs/auditor/configuration/security-provider",children:"Security Provider Configuration"})," for more details."]}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-role-checker",children:"\ud83d\udee1\ufe0f Role Checker"}),"\n",(0,t.jsx)(n.p,{children:"The role checker determines whether a user can view audits for a specific entity:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"$configuration->setRoleChecker(function (string $entity, string $scope): bool {\n    // $entity is the FQCN of the audited entity\n    // $scope is the action (e.g., 'view')\n    \n    // Example: Only admins can view User audits\n    if ($entity === User::class) {\n        return $this->security->isGranted('ROLE_ADMIN');\n    }\n    \n    // Allow everyone to view other audits\n    return true;\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/auditor-docs/auditor/configuration/role-checker",children:"Role Checker Configuration"})," for more details."]}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-doctrineprovider-configuration",children:"\ud83d\uddc4\ufe0f DoctrineProvider Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The DoctrineProvider has its own configuration. See ",(0,t.jsx)(n.a,{href:"/auditor-docs/auditor/providers/doctrine/configuration",children:"DoctrineProvider Configuration"})," for details."]}),"\n",(0,t.jsx)(n.h2,{id:"-configuration-summary",children:"\ud83d\udcdd Configuration Summary"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"<?php\n\nuse DH\\Auditor\\Auditor;\nuse DH\\Auditor\\Configuration;\nuse DH\\Auditor\\User\\User;\nuse Symfony\\Component\\EventDispatcher\\EventDispatcher;\n\n$configuration = new Configuration([\n    'enabled' => true,\n    'timezone' => 'Europe/Paris',\n]);\n\n// Set user provider\n$configuration->setUserProvider(function (): ?User {\n    $user = $securityContext->getUser();\n    if (null === $user) {\n        return null;\n    }\n    return new User((string) $user->getId(), $user->getUsername());\n});\n\n// Set security provider\n$configuration->setSecurityProvider(function (): array {\n    return [\n        'client_ip' => $_SERVER['REMOTE_ADDR'] ?? null,\n    ];\n});\n\n// Set role checker\n$configuration->setRoleChecker(function (string $entity, string $scope): bool {\n    return $this->authorizationChecker->isGranted('ROLE_AUDIT_VIEWER');\n});\n\n$auditor = new Auditor($configuration, new EventDispatcher());\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\ud83d\udc64 ",(0,t.jsx)(n.a,{href:"/auditor-docs/auditor/configuration/user-provider",children:"User Provider Configuration"})]}),"\n",(0,t.jsxs)(n.li,{children:["\ud83d\udd10 ",(0,t.jsx)(n.a,{href:"/auditor-docs/auditor/configuration/security-provider",children:"Security Provider Configuration"})]}),"\n",(0,t.jsxs)(n.li,{children:["\ud83d\udee1\ufe0f ",(0,t.jsx)(n.a,{href:"/auditor-docs/auditor/configuration/role-checker",children:"Role Checker Configuration"})]}),"\n",(0,t.jsxs)(n.li,{children:["\ud83d\uddc4\ufe0f ",(0,t.jsx)(n.a,{href:"/auditor-docs/auditor/providers/doctrine/configuration",children:"DoctrineProvider Configuration"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>d});var i=r(6540);const t={},o=i.createContext(t);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);