"use strict";(self.webpackChunkauditor_docs=self.webpackChunkauditor_docs||[]).push([[3230],{23928(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>o,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"querying/entry","title":"Entry Model Reference","description":"Understand the structure of audit log entries","source":"@site/docs/auditor/querying/entry.md","sourceDirName":"querying","slug":"/querying/entry","permalink":"/auditor-docs/auditor/querying/entry","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Querying Audits","permalink":"/auditor-docs/auditor/querying/"},"next":{"title":"Filters Reference","permalink":"/auditor-docs/auditor/querying/filters"}}');var s=t(74848),a=t(28453);const i={},d="Entry Model Reference",l={},c=[{value:"\ud83d\udd0d Overview",id:"-overview",level:2},{value:"\ud83c\udfd7\ufe0f Creating Entries",id:"\ufe0f-creating-entries",level:2},{value:"\ud83d\udccb Properties &amp; Methods",id:"-properties--methods",level:2},{value:"getId()",id:"getid",level:3},{value:"getType()",id:"gettype",level:3},{value:"getObjectId()",id:"getobjectid",level:3},{value:"getDiscriminator()",id:"getdiscriminator",level:3},{value:"getTransactionHash()",id:"gettransactionhash",level:3},{value:"getDiffs()",id:"getdiffs",level:3},{value:"Insert Diffs",id:"insert-diffs",level:4},{value:"Update Diffs",id:"update-diffs",level:4},{value:"Remove Diffs",id:"remove-diffs",level:4},{value:"Association Diffs",id:"association-diffs",level:4},{value:"With Metadata",id:"with-metadata",level:4},{value:"getExtraData()",id:"getextradata",level:3},{value:"getUserId()",id:"getuserid",level:3},{value:"getUsername()",id:"getusername",level:3},{value:"getUserFqdn()",id:"getuserfqdn",level:3},{value:"getUserFirewall()",id:"getuserfirewall",level:3},{value:"getIp()",id:"getip",level:3},{value:"getCreatedAt()",id:"getcreatedat",level:3},{value:"\ud83d\udca1 Working with Entries",id:"-working-with-entries",level:2},{value:"Display Audit Log",id:"display-audit-log",level:3},{value:"Check Change Type",id:"check-change-type",level:3},{value:"Group by Transaction",id:"group-by-transaction",level:3},{value:"Filter Changes by Field",id:"filter-changes-by-field",level:3},{value:"Build Timeline",id:"build-timeline",level:3},{value:"\ud83d\udcc4 JSON Serialization",id:"-json-serialization",level:2},{value:"Next Steps",id:"next-steps",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",path:"path",pre:"pre",strong:"strong",svg:"svg",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"entry-model-reference",children:"Entry Model Reference"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Understand the structure of audit log entries"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Entry"})," class represents a single audit log entry. This page documents all its properties and methods."]}),"\n",(0,s.jsx)(n.h2,{id:"-overview",children:"\ud83d\udd0d Overview"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace DH\\Auditor\\Model;\n\nfinal class Entry\n{\n    // Created from database row\n    public static function fromArray(array $row): self;\n    \n    // Accessors for all properties\n    public function getId(): ?int;\n    public function getType(): string;\n    public function getObjectId(): string;\n    // ... etc\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-creating-entries",children:"\ud83c\udfd7\ufe0f Creating Entries"}),"\n",(0,s.jsx)(n.p,{children:"Entries are typically created by the Reader when executing queries:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$reader = new Reader($provider);\n$query = $reader->createQuery(User::class);\n$entries = $query->execute();  // Returns Entry[]\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can also create entries manually (useful for testing):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use DH\\Auditor\\Model\\Entry;\n\n$entry = Entry::fromArray([\n    'id' => 1,\n    'type' => 'update',\n    'object_id' => '123',\n    'discriminator' => null,\n    'transaction_hash' => 'abc123',\n    'diffs' => '{\"name\":{\"old\":\"John\",\"new\":\"Jane\"}}',\n    'extra_data' => '{\"department\":\"IT\",\"role\":\"admin\"}', // or null\n    'blame_id' => '42',\n    'blame_user' => 'admin',\n    'blame_user_fqdn' => 'App\\\\Entity\\\\User',\n    'blame_user_firewall' => 'main',\n    'ip' => '192.168.1.1',\n    'created_at' => new \\DateTimeImmutable(),\n]);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-properties--methods",children:"\ud83d\udccb Properties & Methods"}),"\n",(0,s.jsx)(n.h3,{id:"getid",children:"getId()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getId(): ?int\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the unique identifier of the audit entry (auto-increment primary key)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$entryId = $entry->getId();\n// Returns: 12345\n"})}),"\n",(0,s.jsx)(n.h3,{id:"gettype",children:"getType()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getType(): string\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the type of action that was audited."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$type = $entry->getType();\n// Returns: 'insert', 'update', 'remove', 'associate', or 'dissociate'\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"insert"})}),(0,s.jsx)(n.td,{children:"A new entity was created"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"update"})}),(0,s.jsx)(n.td,{children:"An existing entity was modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"remove"})}),(0,s.jsx)(n.td,{children:"An entity was deleted"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"associate"})}),(0,s.jsx)(n.td,{children:"A many-to-many relationship was created"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dissociate"})}),(0,s.jsx)(n.td,{children:"A many-to-many relationship was removed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"getobjectid",children:"getObjectId()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getObjectId(): string\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the ID of the audited entity."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$entityId = $entry->getObjectId();\n// Returns: '123' (always string)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getdiscriminator",children:"getDiscriminator()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getDiscriminator(): ?string\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the entity class name for single-table inheritance entities."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$discriminator = $entry->getDiscriminator();\n// Returns: 'App\\Entity\\Admin' or null\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This is used when auditing entities with ",(0,s.jsx)(n.code,{children:"SINGLE_TABLE"})," inheritance to identify the actual entity class."]}),"\n",(0,s.jsx)(n.h3,{id:"gettransactionhash",children:"getTransactionHash()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getTransactionHash(): ?string\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the transaction hash that groups related changes."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$hash = $entry->getTransactionHash();\n// Returns: 'a1b2c3d4e5f6...' (40 character hash)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["All changes made in a single ",(0,s.jsx)(n.code,{children:"EntityManager::flush()"})," share the same transaction hash."]}),"\n",(0,s.jsx)(n.h3,{id:"getdiffs",children:"getDiffs()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getDiffs(bool $includeMetadata = false): array\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the actual changes recorded for this audit entry."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Basic usage\n$diffs = $entry->getDiffs();\n\n// Include @source metadata\n$diffs = $entry->getDiffs(true);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"insert-diffs",children:"Insert Diffs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// When type = 'insert'\n[\n    'email' => [\n        'new' => 'john@example.com',\n        'old' => null,\n    ],\n    'name' => [\n        'new' => 'John Doe',\n        'old' => null,\n    ],\n    'roles' => [\n        'new' => ['ROLE_USER'],\n        'old' => null,\n    ],\n]\n"})}),"\n",(0,s.jsx)(n.h4,{id:"update-diffs",children:"Update Diffs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// When type = 'update'\n[\n    'name' => [\n        'new' => 'Jane Doe',\n        'old' => 'John Doe',\n    ],\n    'email' => [\n        'new' => 'jane@example.com',\n        'old' => 'john@example.com',\n    ],\n]\n"})}),"\n",(0,s.jsx)(n.h4,{id:"remove-diffs",children:"Remove Diffs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// When type = 'remove'\n// Contains a summary of the deleted entity\n[\n    'id' => 123,\n    'label' => 'John Doe',  // Generated from entity's __toString or ID\n    'class' => 'App\\\\Entity\\\\User',\n]\n"})}),"\n",(0,s.jsx)(n.h4,{id:"association-diffs",children:"Association Diffs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// When type = 'associate' or 'dissociate'\n[\n    'source' => [\n        'class' => 'App\\\\Entity\\\\Post',\n        'id' => 1,\n        'label' => 'My Blog Post',\n        'field' => 'tags',\n    ],\n    'target' => [\n        'class' => 'App\\\\Entity\\\\Tag',\n        'id' => 5,\n        'label' => 'PHP',\n        'field' => 'posts',\n    ],\n    'is_owning_side' => true,\n    'table' => 'post_tag',  // The join table\n]\n"})}),"\n",(0,s.jsx)(n.h4,{id:"with-metadata",children:"With Metadata"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$diffs = $entry->getDiffs(true);\n// Includes @source key with additional metadata\n[\n    '@source' => [\n        // Source information\n    ],\n    'name' => [\n        'new' => 'Jane',\n        'old' => 'John',\n    ],\n]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getextradata",children:"getExtraData()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getExtraData(): ?array\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns any supplementary data attached to this audit entry, or ",(0,s.jsx)(n.code,{children:"null"})," if none was set."]}),"\n",(0,s.jsxs)(n.div,{className:"markdown-alert markdown-alert-tip",dir:"auto",children:["\n",(0,s.jsxs)(n.p,{className:"markdown-alert-title",dir:"auto",children:[(0,s.jsx)(n.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,s.jsx)(n.path,{d:"M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),"TIP"]}),"\n",(0,s.jsxs)(n.p,{children:["Extra data is populated via a ",(0,s.jsx)(n.code,{children:"LifecycleEvent"})," listener. See the ",(0,s.jsx)(n.a,{href:"/auditor-docs/auditor/extra-data",children:"Extra Data guide"})," for setup instructions and examples."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$extraData = $entry->getExtraData();\n// Returns: ['department' => 'IT', 'role' => 'admin'] or null\n\n// Also available as a virtual property\n$extraData = $entry->extraData;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Extra data is populated via a ",(0,s.jsx)(n.code,{children:"LifecycleEvent"})," listener. See the ",(0,s.jsx)(n.a,{href:"/auditor-docs/auditor/extra-data",children:"Extra Data guide"})," for setup instructions and examples."]}),"\n",(0,s.jsx)(n.h3,{id:"getuserid",children:"getUserId()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getUserId(): int|string|null\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the identifier of the user who made the change."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$userId = $entry->getUserId();\n// Returns: 42 or '42' or 'user-uuid-123' or null\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns ",(0,s.jsx)(n.code,{children:"null"})," if no user was identified (e.g., system process, CLI command without user context)."]}),"\n",(0,s.jsx)(n.h3,{id:"getusername",children:"getUsername()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getUsername(): ?string\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the username/display name of the user."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$username = $entry->getUsername();\n// Returns: 'admin' or 'John Doe' or null\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getuserfqdn",children:"getUserFqdn()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getUserFqdn(): ?string\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the fully qualified class name of the user object."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$userClass = $entry->getUserFqdn();\n// Returns: 'App\\Entity\\User' or null\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getuserfirewall",children:"getUserFirewall()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getUserFirewall(): ?string\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the Symfony security firewall name."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$firewall = $entry->getUserFirewall();\n// Returns: 'main' or 'api' or null\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getip",children:"getIp()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getIp(): ?string\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the client IP address."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$ip = $entry->getIp();\n// Returns: '192.168.1.1' or '2001:db8::1' (IPv6) or null\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getcreatedat",children:"getCreatedAt()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function getCreatedAt(): ?\\DateTimeImmutable\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns when the audit entry was created."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$createdAt = $entry->getCreatedAt();\n// Returns: DateTimeImmutable\n\necho $createdAt->format('Y-m-d H:i:s');\n// Output: 2024-01-15 14:30:45\n"})}),"\n",(0,s.jsx)(n.p,{children:"The timestamp uses the timezone configured in the Auditor configuration."}),"\n",(0,s.jsx)(n.h2,{id:"-working-with-entries",children:"\ud83d\udca1 Working with Entries"}),"\n",(0,s.jsx)(n.h3,{id:"display-audit-log",children:"Display Audit Log"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"$entries = $query->execute();\n\nforeach ($entries as $entry) {\n    printf(\n        \"[%s] %s %s #%s by %s (%s)\\n\",\n        $entry->getCreatedAt()->format('Y-m-d H:i:s'),\n        ucfirst($entry->getType()),\n        $entry->getDiscriminator() ?? 'Entity',\n        $entry->getObjectId(),\n        $entry->getUsername() ?? 'System',\n        $entry->getIp() ?? 'N/A'\n    );\n    \n    foreach ($entry->getDiffs() as $field => $change) {\n        if (isset($change['old'], $change['new'])) {\n            printf(\n                \"  - %s: %s \u2192 %s\\n\",\n                $field,\n                json_encode($change['old']),\n                json_encode($change['new'])\n            );\n        }\n    }\n    echo \"\\n\";\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"check-change-type",children:"Check Change Type"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"if ($entry->getType() === 'update') {\n    $changes = $entry->getDiffs();\n    \n    // Check if specific field changed\n    if (isset($changes['email'])) {\n        echo sprintf(\n            \"Email changed from %s to %s\\n\",\n            $changes['email']['old'],\n            $changes['email']['new']\n        );\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"group-by-transaction",children:"Group by Transaction"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:'$entries = $query->execute();\n$grouped = [];\n\nforeach ($entries as $entry) {\n    $hash = $entry->getTransactionHash();\n    if (!isset($grouped[$hash])) {\n        $grouped[$hash] = [];\n    }\n    $grouped[$hash][] = $entry;\n}\n\n// Now $grouped contains all changes per transaction\nforeach ($grouped as $hash => $transactionEntries) {\n    echo "Transaction: $hash\\n";\n    foreach ($transactionEntries as $entry) {\n        echo "  - " . $entry->getType() . " on #" . $entry->getObjectId() . "\\n";\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"filter-changes-by-field",children:"Filter Changes by Field"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Find all entries where 'status' field changed\n$statusChanges = array_filter($entries, function (Entry $entry) {\n    return isset($entry->getDiffs()['status']);\n});\n\nforeach ($statusChanges as $entry) {\n    $diffs = $entry->getDiffs();\n    echo sprintf(\n        \"Status changed from '%s' to '%s' at %s\\n\",\n        $diffs['status']['old'],\n        $diffs['status']['new'],\n        $entry->getCreatedAt()->format('Y-m-d H:i:s')\n    );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"build-timeline",children:"Build Timeline"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Build a timeline of changes for an entity\n$query = $reader->createQuery(User::class, [\n    'object_id' => 123,\n    'page_size' => null,\n]);\n$query->resetOrderBy();\n$query->addOrderBy(Query::CREATED_AT, 'ASC');\n\n$timeline = [];\nforeach ($query->execute() as $entry) {\n    $timeline[] = [\n        'date' => $entry->getCreatedAt(),\n        'type' => $entry->getType(),\n        'user' => $entry->getUsername(),\n        'changes' => $entry->getDiffs(),\n    ];\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-json-serialization",children:"\ud83d\udcc4 JSON Serialization"}),"\n",(0,s.jsxs)(n.div,{className:"markdown-alert markdown-alert-note",dir:"auto",children:["\n",(0,s.jsxs)(n.p,{className:"markdown-alert-title",dir:"auto",children:[(0,s.jsx)(n.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,s.jsx)(n.path,{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"})}),"NOTE"]}),"\n",(0,s.jsxs)(n.p,{children:["The diffs are stored as JSON and automatically decoded - no need to call ",(0,s.jsx)(n.code,{children:"json_decode()"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Diffs are returned as arrays, not JSON strings\n$diffs = $entry->getDiffs();\n// This is already an array, no need to json_decode()\n\n// To get JSON for API response:\n$json = json_encode([\n    'id' => $entry->getId(),\n    'type' => $entry->getType(),\n    'object_id' => $entry->getObjectId(),\n    'diffs' => $entry->getDiffs(),\n    'extra_data' => $entry->getExtraData(),\n    'created_at' => $entry->getCreatedAt()?->format('c'),\n    'user' => $entry->getUsername(),\n]);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcca ",(0,s.jsx)(n.a,{href:"/auditor-docs/auditor/extra-data",children:"Extra Data Guide"})]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udd0d ",(0,s.jsx)(n.a,{href:"/auditor-docs/auditor/querying/",children:"Querying Overview"})]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83c\udfaf ",(0,s.jsx)(n.a,{href:"/auditor-docs/auditor/querying/filters",children:"Filters Reference"})]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453(e,n,t){t.d(n,{R:()=>i,x:()=>d});var r=t(96540);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);