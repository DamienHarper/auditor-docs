"use strict";(self.webpackChunkauditor_docs=self.webpackChunkauditor_docs||[]).push([[8614],{1536(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"getting-started/installation","title":"Installation","description":"Install auditor-bundle in your Symfony application","source":"@site/docs/auditor-bundle/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/auditor-docs/auditor-bundle/getting-started/installation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"auditorBundleSidebar","previous":{"title":"Introduction","permalink":"/auditor-docs/auditor-bundle/intro"},"next":{"title":"Configuration Reference","permalink":"/auditor-docs/auditor-bundle/configuration/"}}');var s=i(4848),t=i(8453);const d={},l="Installation",a={},o=[{value:"\ud83d\udccb Requirements",id:"-requirements",level:2},{value:"Version 7.x (Current)",id:"version-7x-current",level:3},{value:"Previous Versions",id:"previous-versions",level:3},{value:"\ud83d\udce6 Install via Composer",id:"-install-via-composer",level:2},{value:"\ud83d\udd0c Bundle Registration",id:"-bundle-registration",level:2},{value:"Symfony Flex (Automatic)",id:"symfony-flex-automatic",level:3},{value:"Manual Registration",id:"manual-registration",level:3},{value:"\u2699\ufe0f Basic Configuration",id:"\ufe0f-basic-configuration",level:2},{value:"\ud83d\udee4\ufe0f Route Configuration",id:"\ufe0f-route-configuration",level:2},{value:"Symfony Flex (Automatic)",id:"symfony-flex-automatic-1",level:3},{value:"Manual Configuration",id:"manual-configuration",level:3},{value:"\ud83d\uddc4\ufe0f Database Schema",id:"\ufe0f-database-schema",level:2},{value:"Using Doctrine Migrations (Recommended)",id:"using-doctrine-migrations-recommended",level:3},{value:"Using Schema Tool",id:"using-schema-tool",level:3},{value:"\ud83c\udfa8 Asset Installation",id:"-asset-installation",level:2},{value:"\u2705 Verification",id:"-verification",level:2},{value:"\ud83d\udce6 What Gets Installed",id:"-what-gets-installed",level:2},{value:"\ud83d\ude80 Next Steps",id:"-next-steps",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",path:"path",pre:"pre",strong:"strong",svg:"svg",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"installation",children:"Installation"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Install auditor-bundle in your Symfony application"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This guide covers the installation of auditor-bundle in a Symfony application."}),"\n",(0,s.jsx)(n.h2,{id:"-requirements",children:"\ud83d\udccb Requirements"}),"\n",(0,s.jsx)(n.h3,{id:"version-7x-current",children:"Version 7.x (Current)"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Requirement"}),(0,s.jsx)(n.th,{children:"Version"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"PHP"}),(0,s.jsx)(n.td,{children:">= 8.4"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Symfony"}),(0,s.jsx)(n.td,{children:">= 8.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Doctrine DBAL"}),(0,s.jsx)(n.td,{children:">= 4.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Doctrine ORM"}),(0,s.jsx)(n.td,{children:">= 3.2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"auditor"}),(0,s.jsx)(n.td,{children:">= 4.0"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"previous-versions",children:"Previous Versions"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Version"}),(0,s.jsx)(n.th,{children:"PHP"}),(0,s.jsx)(n.th,{children:"Symfony"}),(0,s.jsx)(n.th,{children:"auditor"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"6.x"}),(0,s.jsx)(n.td,{children:">= 8.2"}),(0,s.jsx)(n.td,{children:">= 5.4"}),(0,s.jsx)(n.td,{children:">= 3.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"5.x"}),(0,s.jsx)(n.td,{children:">= 7.4"}),(0,s.jsx)(n.td,{children:">= 4.4"}),(0,s.jsx)(n.td,{children:">= 2.0"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"-install-via-composer",children:"\ud83d\udce6 Install via Composer"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"composer require damienharper/auditor-bundle\n"})}),"\n",(0,s.jsx)(n.p,{children:"This installs both the bundle and the auditor library."}),"\n",(0,s.jsx)(n.h2,{id:"-bundle-registration",children:"\ud83d\udd0c Bundle Registration"}),"\n",(0,s.jsx)(n.h3,{id:"symfony-flex-automatic",children:"Symfony Flex (Automatic)"}),"\n",(0,s.jsxs)(n.p,{children:["With Symfony Flex, the bundle is automatically registered in ",(0,s.jsx)(n.code,{children:"config/bundles.php"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"manual-registration",children:"Manual Registration"}),"\n",(0,s.jsxs)(n.p,{children:["Add to ",(0,s.jsx)(n.code,{children:"config/bundles.php"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"<?php\n\nreturn [\n    // ...\n    DH\\AuditorBundle\\DHAuditorBundle::class => ['all' => true],\n];\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-basic-configuration",children:"\u2699\ufe0f Basic Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"config/packages/dh_auditor.yaml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            entities:\n                App\\Entity\\User: ~\n                App\\Entity\\Post: ~\n"})}),"\n",(0,s.jsx)(n.p,{children:"This minimal configuration:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 Enables auditing for ",(0,s.jsx)(n.code,{children:"User"})," and ",(0,s.jsx)(n.code,{children:"Post"})," entities"]}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Uses default settings for everything else"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-route-configuration",children:"\ud83d\udee4\ufe0f Route Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"symfony-flex-automatic-1",children:"Symfony Flex (Automatic)"}),"\n",(0,s.jsxs)(n.p,{children:["Routes are automatically added to ",(0,s.jsx)(n.code,{children:"config/routes/dh_auditor.yaml"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"manual-configuration",children:"Manual Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"config/routes/dh_auditor.yaml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'dh_auditor:\n    resource: "@DHAuditorBundle/Controller/"\n    type: auditor\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-database-schema",children:"\ud83d\uddc4\ufe0f Database Schema"}),"\n",(0,s.jsx)(n.p,{children:"Create audit tables by updating your database schema:"}),"\n",(0,s.jsx)(n.h3,{id:"using-doctrine-migrations-recommended",children:"Using Doctrine Migrations (Recommended)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bin/console doctrine:migrations:diff\nbin/console doctrine:migrations:migrate\n"})}),"\n",(0,s.jsx)(n.h3,{id:"using-schema-tool",children:"Using Schema Tool"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bin/console doctrine:schema:update --force\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-asset-installation",children:"\ud83c\udfa8 Asset Installation"}),"\n",(0,s.jsx)(n.p,{children:"Install assets for the audit viewer:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bin/console assets:install\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-verification",children:"\u2705 Verification"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Enable the viewer"})," in your configuration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"dh_auditor:\n    providers:\n        doctrine:\n            viewer: true\n            entities:\n                App\\Entity\\User: ~\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Clear cache"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bin/console cache:clear\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Access the viewer"})," at ",(0,s.jsx)(n.code,{children:"/audit"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Make a change"})," to a User entity and verify it appears in the viewer"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.div,{className:"markdown-alert markdown-alert-tip",dir:"auto",children:["\n",(0,s.jsxs)(n.p,{className:"markdown-alert-title",dir:"auto",children:[(0,s.jsx)(n.svg,{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:(0,s.jsx)(n.path,{d:"M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),"TIP"]}),"\n",(0,s.jsxs)(n.p,{children:["If you don't see the viewer at ",(0,s.jsx)(n.code,{children:"/audit"}),", make sure routes are properly configured and the cache has been cleared."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"-what-gets-installed",children:"\ud83d\udce6 What Gets Installed"}),"\n",(0,s.jsx)(n.p,{children:"The bundle registers these services automatically:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Service"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DH\\Auditor\\Auditor"})}),(0,s.jsx)(n.td,{children:"Main auditor service"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DH\\Auditor\\Provider\\Doctrine\\DoctrineProvider"})}),(0,s.jsx)(n.td,{children:"Doctrine provider"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DH\\Auditor\\Provider\\Doctrine\\Persistence\\Reader\\Reader"})}),(0,s.jsx)(n.td,{children:"Audit reader"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dh_auditor.user_provider"})}),(0,s.jsx)(n.td,{children:"User info for audit entries"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dh_auditor.security_provider"})}),(0,s.jsx)(n.td,{children:"Security info for audit entries"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dh_auditor.role_checker"})}),(0,s.jsx)(n.td,{children:"Access control for viewer"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-next-steps",children:"\ud83d\ude80 Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2699\ufe0f ",(0,s.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/configuration/",children:"Configuration Reference"})," - All configuration options"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udc41\ufe0f ",(0,s.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/viewer/",children:"Audit Viewer"})," - Using the web interface"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udd27 ",(0,s.jsx)(n.a,{href:"/auditor-docs/auditor-bundle/customization/",children:"Customization"})," - Custom providers"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>d,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);